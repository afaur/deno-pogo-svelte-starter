/* generated by Svelte v3.23.2 */
import {
  create_ssr_component,
  each,
  escape,
} from "../ven/sveltejs-svelte-deno/internal/index-ssr.mjs";

import { onMount } from "../ven/sveltejs-svelte-deno/internal/index-ssr.mjs";
import {
  fly,
  fade,
} from "../ven/sveltejs-svelte-deno/transition/index-ssr.mjs";
import { flip } from "../ven/sveltejs-svelte-deno/animate/index-ssr.mjs";

const ListAnimator = create_ssr_component(
  ($$result, $$props, $$bindings, $$slots) => {
    let { effect = { name: "fade", conf: { duration: 250 } } } = $$props;
    let next = 0, items = [], intervalId = undefined;
    const effects = { fly, fade };
    const intro = (node) => effects[effect.name](node, effect.conf);

    const incrementItems = () => {
      if (next > 80) {
        clearInterval(intervalId);
      }

      items = [next++, ...items];
    };

    onMount(() => {
      intervalId = setInterval(incrementItems, 250);

      window.addEventListener("focus", () => {
        if (!intervalId) {
          intervalId = setInterval(incrementItems, 250);
        }
      });

      window.addEventListener("blur", () => {
        if (intervalId) {
          clearInterval(intervalId);
          intervalId = undefined;
        }
      });

      items = [next++, ...items];
    });

    if ($$props.effect === void 0 && $$bindings.effect && effect !== void 0) {
      $$bindings.effect(effect);
    }

    return `${
      each(items, (item) =>
        `<div><button>${escape(item)}</button>
  </div>`)
    }`;
  },
);

export default ListAnimator;
