/* generated by Svelte v3.23.2 */
import {
  create_ssr_component,
  each,
  escape,
} from "../ven/sveltejs-svelte-deno/internal/index-ssr.mjs";

import { onMount } from "../ven/sveltejs-svelte-deno/internal/index-ssr.mjs";
import { fly, slide, scaleOutVertical } from "./libTransitions.mjs";

const TransitionList = create_ssr_component(
  ($$result, $$props, $$bindings, $$slots) => {
    let {
      transition = {
        name: "fly",
        conf: { duration: 250, x: 200 },
      },
    } = $$props;

    let next = 0, items = [], intervalId = undefined;
    const transitions = { fly, slide, scaleOutVertical };
    const intro = (node) => transitions[transition.name](node, transition.conf);

    const incrementItems = () => {
      if (next > 80) {
        clearInterval(intervalId);
      }

      items = [next++, ...items];
    };

    onMount(() => {
      intervalId = setInterval(incrementItems, 250);

      window.addEventListener("focus", () => {
        if (!intervalId) {
          intervalId = setInterval(incrementItems, 250);
        }
      });

      window.addEventListener("blur", () => {
        if (intervalId) {
          clearInterval(intervalId);
          intervalId = undefined;
        }
      });

      items = [next++, ...items];
    });

    if (
      $$props.transition === void 0 && $$bindings.transition &&
      transition !== void 0
    ) {
      $$bindings.transition(transition);
    }

    return `${
      each(items, (item) =>
        `<div><button>${escape(item)}</button>
  </div>`)
    }`;
  },
);

export default TransitionList;
